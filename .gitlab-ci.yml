variables:
  DEPENDENCIES: "$CI_PROJECT_DIR/dependencies"
  GARRYSMOD_COMMON: "$CI_PROJECT_DIR/dependencies/garrysmod_common"
  SOURCE_SDK: "$CI_PROJECT_DIR/dependencies/sourcesdk-minimal"
cache:
  paths:
    - "$DEPENDENCIES/*"
    - "$CI_PROJECT_DIR/projects/*"
gmsv_serversecure_win32:
  stage: build
  tags: windows
  variables:
    PREMAKE5: "$CI_PROJECT_DIR/dependencies/windows/premake-core/premake5.exe"
  script: ./ci.ps1
  artifacts:
    paths: "gmsv_serversecure_win32.dll"
gmsv_serversecure_linux:
  stage: build
  tags: linux
  variables:
    PROJECT_OS: "linux"
    TARGET_OS: "linux"
    PREMAKE5: "$CI_PROJECT_DIR/dependencies/linux/premake-core/premake5"
    CXX: "g++-4.9"
    CC: "gcc-4.9"
  script: ./ci.sh
  artifacts:
    paths: "gmsv_serversecure_linux.dll"
gmsv_serversecure_macosx:
  stage: build
  tags: macosx
  variables:
    PROJECT_OS: "macosx"
    TARGET_OS: "osx"
    PREMAKE5: "$CI_PROJECT_DIR/dependencies/macosx/premake-core/premake5"
    CXX: "g++"
    CC: "gcc"
  script: ./ci.sh
  artifacts:
    paths: "gmsv_serversecure_osx.dll"
